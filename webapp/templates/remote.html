{% extends "layout.html" %}

{% block content %}

<!-- <style>
#speed{
    width:inherit;
    height:50px;
}
#turn{
    width:50px;
    height:inherit;
}
</style> -->

<section class="section">
    <!-- camera feed and sliders -->
    <div class="container">
        <div class="columns is-mobile is-multiline is-centered" style="height:60%;">
            <div class="column is-three-fifths is-centered is-offset-1">
                <figure id="camera-stream-wrapper" class="image is-4by3">
                    <img id="camera-stream" class="camera-stream-view"></img>
                </figure>
            </div>
            <div class="column is-1 is-paddingless is-marginless">
                <canvas class="slider-vertical has-text-success is-paddingless is-marginless" id="speed"></canvas>
            </div>
            <div class="column is-three-fifths is-centered is-paddingless is-marginless">
                <canvas class="slider has-text-info is-paddingless is-marginless" id="turn"></canvas>
            </div>
        </div>

        <!-- sliders' textual values -->
        <div class="level">
            <div class="level-item has-text-centered">
                <div>
                    <p class="heading">Turn</p>
                    <p class="title" id="turn-o-meter">0</p>
                </div>
            </div>
            <div class="level-item has-text-centered">
                <div>
                    <p class="heading">Speed</p>
                    <p class="title" id="speed-o-meter">0</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Initialize websocket I/O-->
<script src="{{ url_for('static', filename='scripts/libs/socket.io.min.js') }}"></script>
<script>const socket = io.connect({ transports: ['websocket'] });</script>

<!-- This is used for adjusting the slider sizes when the camera feed size changes -->
<script src="{{ url_for('static', filename='scripts/libs/ResizeSensor.js') }}"></script>

<!-- Initialize camera -->
<script src="{{ url_for('static', filename='scripts/camera.js') }}"></script>

<!-- Initialize controller -->
<script src="{{ url_for('static', filename='scripts/remote/controller.js') }}"></script>
<script src="{{ url_for('static', filename='scripts/remote/slider.js') }}"></script>
<script>initRemote();</script>
{% endblock %}